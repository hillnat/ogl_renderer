\hypertarget{_scene_8cpp_source}{}\doxysection{Scene.\+cpp}
\label{_scene_8cpp_source}\index{C:/Users/s239074/Documents/ogl\_renderer/ogl\_renderer/engine/Scene.cpp@{C:/Users/s239074/Documents/ogl\_renderer/ogl\_renderer/engine/Scene.cpp}}
\mbox{\hyperlink{_scene_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{thirdparty_2assimp_2out_2install_2x64-_release_2include_2assimp_2_scene_8h}{scene.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00002}00002 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{ext_8hpp}{glm/ext.hpp}}"{}}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00003}00003 \textcolor{preprocessor}{\#include "{}../renderer/renderer.h"{}}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00004}00004 }
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00005}\mbox{\hyperlink{class_scene_a076c10df7e28c559db2dac955f22f3a0}{00005}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_scene_a076c10df7e28c559db2dac955f22f3a0}{Scene::AddToScene}}(\mbox{\hyperlink{class_game_object}{GameObject}}* go) \{}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00006}00006     \mbox{\hyperlink{class_scene_aa2ecf40b87422ea8d9a38a04b7765345}{gameObjects}}.push\_back(go);}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00007}00007 \}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00008}\mbox{\hyperlink{class_scene_a5c47bcdffc63bb6c82813a66b3f94412}{00008}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_scene_a076c10df7e28c559db2dac955f22f3a0}{Scene::AddToScene}}(\mbox{\hyperlink{class_camera}{Camera}}* cam) \{}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00009}00009     \mbox{\hyperlink{class_scene_a766a660b1b9d851b14157a6d9373f719}{cameras}}.push\_back(cam);}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00010}00010 \}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00011}\mbox{\hyperlink{class_scene_a765258e8c77e72e9699d9b09e19aff20}{00011}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_scene_a076c10df7e28c559db2dac955f22f3a0}{Scene::AddToScene}}(\mbox{\hyperlink{struct_light}{Light}}* light) \{}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00012}00012     \mbox{\hyperlink{class_scene_a4ecc3182a80435e1c4dfbe1b20e559bd}{lights}}.push\_back(light);}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00013}00013 \}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00014}\mbox{\hyperlink{class_scene_a551288687e94be3ae6cf8a868eb95735}{00014}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_scene_a551288687e94be3ae6cf8a868eb95735}{Scene::FreeAllMeshes}}() \{}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00015}00015     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{class_scene_aa2ecf40b87422ea8d9a38a04b7765345}{gameObjects}}.size(); i++) \{}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00016}00016         \mbox{\hyperlink{_renderer_8cpp_a9aba7adb196ca0b29e4a0cad46b05dd4}{FreeMesh}}(\mbox{\hyperlink{class_scene_aa2ecf40b87422ea8d9a38a04b7765345}{gameObjects}}[i]-\/>mesh);}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00017}00017     \}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00018}00018 \}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00019}\mbox{\hyperlink{class_scene_af1231c8f794238d9fb79e5f413e0108f}{00019}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_scene_af1231c8f794238d9fb79e5f413e0108f}{Scene::RenderAll}}() \{}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00020}00020     std::vector<Material*> uniqueMaterials;}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00021}00021     \textcolor{comment}{//Get all unique materials gameobjects}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00022}00022     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{class_scene_aa2ecf40b87422ea8d9a38a04b7765345}{gameObjects}}.size(); i++) \{}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00023}00023         \textcolor{keywordflow}{if} (uniqueMaterials.size() != 0) \{}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00024}00024             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < uniqueMaterials.size(); j++) \{}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00025}00025                 \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_scene_aa2ecf40b87422ea8d9a38a04b7765345}{gameObjects}}[i]-\/>material != uniqueMaterials[j]) \{ uniqueMaterials.push\_back((*\mbox{\hyperlink{class_scene_aa2ecf40b87422ea8d9a38a04b7765345}{gameObjects}}[i]).material); \}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00026}00026             \}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00027}00027         \}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00028}00028         \textcolor{keywordflow}{else}\{ uniqueMaterials.push\_back((*\mbox{\hyperlink{class_scene_aa2ecf40b87422ea8d9a38a04b7765345}{gameObjects}}[i]).material); \}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00029}00029     \}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00030}00030     std::vector<Shader*> uniqueShaders;}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00031}00031     \textcolor{comment}{//Get all unique shaders from materials}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00032}00032     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < uniqueMaterials.size(); i++) \{}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00033}00033         \textcolor{keywordflow}{if} (uniqueShaders.size() != 0) \{}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00034}00034             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < uniqueShaders.size(); j++) \{}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00035}00035                 \textcolor{keywordflow}{if} ((*uniqueMaterials[i]).shader != uniqueShaders[j]) \{ uniqueShaders.push\_back((*uniqueMaterials[i]).shader); \}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00036}00036             \}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00037}00037         \}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00038}00038         \textcolor{keywordflow}{else} \{ uniqueShaders.push\_back((*uniqueMaterials[i]).shader); \}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00039}00039     \}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00040}00040     \textcolor{comment}{//Write uniforms to all shaders}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00041}00041     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < uniqueShaders.size(); i++) \{}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00042}00042         \mbox{\hyperlink{struct_shader}{Shader}}* shader = uniqueShaders[i];}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00043}00043         \textcolor{comment}{//Handle Camera}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00044}00044         \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_scene_a766a660b1b9d851b14157a6d9373f719}{cameras}}.size() != 0 \&\& \mbox{\hyperlink{class_scene_a766a660b1b9d851b14157a6d9373f719}{cameras}}[0] != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00045}00045             \mbox{\hyperlink{class_camera}{Camera}} mainCamera = *\mbox{\hyperlink{class_scene_a766a660b1b9d851b14157a6d9373f719}{cameras}}[0];}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00046}00046             \mbox{\hyperlink{_renderer_8cpp_a7eea27f41e32dbf6703525ac0b7a1bb3}{SetUniform}}(*shader, 1, mainCamera.\mbox{\hyperlink{class_camera_ade59c8e9e1ccf81c92d69722ed070718}{viewMatrix}}());}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00047}00047             \mbox{\hyperlink{_renderer_8cpp_a7eea27f41e32dbf6703525ac0b7a1bb3}{SetUniform}}(*shader, 0, mainCamera.\mbox{\hyperlink{class_camera_ac419b0874d75e3f1616b4505bdc5c959}{projectionMatrix}});}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00048}00048             \mbox{\hyperlink{_renderer_8cpp_a7eea27f41e32dbf6703525ac0b7a1bb3}{SetUniform}}(*shader, 7, vec3(mainCamera.\mbox{\hyperlink{class_camera_a07b41576d8be5553720b17b7a9dbb8e7}{cameraTransform}}.\mbox{\hyperlink{class_transform_a482ec8a49b08f224b2ec513dc27f47b5}{GetPosition}}()));\textcolor{comment}{//Cam position for specular. Mat4 to vec3 conversion}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00049}00049         \}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00050}00050         \mbox{\hyperlink{_renderer_8cpp_a7eea27f41e32dbf6703525ac0b7a1bb3}{SetUniform}}(*shader, 4, vec3(0.1f, 0.1f, 0.1f));\textcolor{comment}{//Set ambient}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00051}00051         \mbox{\hyperlink{_renderer_8cpp_a7eea27f41e32dbf6703525ac0b7a1bb3}{SetUniform}}(*shader, 5, \mbox{\hyperlink{class_scene_a4ecc3182a80435e1c4dfbe1b20e559bd}{lights}}[0]-\/>color);}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00052}00052         \mbox{\hyperlink{_renderer_8cpp_a7eea27f41e32dbf6703525ac0b7a1bb3}{SetUniform}}(*shader, 6, \mbox{\hyperlink{class_scene_a4ecc3182a80435e1c4dfbe1b20e559bd}{lights}}[0]-\/>direction);}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00053}00053     \}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00054}00054     }
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00055}00055     \textcolor{comment}{//Draw all objects, setting object based uniforms for their respective shader}}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00056}00056     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{class_scene_aa2ecf40b87422ea8d9a38a04b7765345}{gameObjects}}.size(); i++) \{}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00057}00057         \mbox{\hyperlink{_renderer_8cpp_a7eea27f41e32dbf6703525ac0b7a1bb3}{SetUniform}}(*(*\mbox{\hyperlink{class_scene_aa2ecf40b87422ea8d9a38a04b7765345}{gameObjects}}[i]).material-\/>shader, 2, (*\mbox{\hyperlink{class_scene_aa2ecf40b87422ea8d9a38a04b7765345}{gameObjects}}[i]).transform.matrix);}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00058}00058         \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_scene_aa2ecf40b87422ea8d9a38a04b7765345}{gameObjects}}[i]-\/>mesh.size !=0) \{}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00059}00059             \mbox{\hyperlink{_renderer_8cpp_a29771e363fa2dc03edb94a64277440ea}{DrawMesh}}(*(*\mbox{\hyperlink{class_scene_aa2ecf40b87422ea8d9a38a04b7765345}{gameObjects}}[i]).material-\/>shader, (*\mbox{\hyperlink{class_scene_aa2ecf40b87422ea8d9a38a04b7765345}{gameObjects}}[i]).mesh);}
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00060}00060         \}       }
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00061}00061     \}   }
\DoxyCodeLine{\Hypertarget{_scene_8cpp_source_l00062}00062 \}}

\end{DoxyCode}
